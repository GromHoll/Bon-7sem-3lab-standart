/******* Игра "Точки" - дизайн-документ *******\

I) Правила игры.

Правила:
    * Игра идет на поле размером от 10x10 до 50x50 пунктов. Играют от двух до четырёх человек, разными маркерами (различие в цвете и/или форме).
    * Игроки ходят по очереди (1 ход — одна точка). Первый ход каждого из соперников происходит в центральной части поля (область из 4-х или 9-ти точек). Последующие ходы могут быть в любой пункт, если только он не в окруженной области. Возможности пасовать (пропускать ход) нет - не успевший заканчивает савить ходы до конца игры. В некоторых вариантах правил факт окружения даёт право на дополнительный ход.
    * При создании непрерывной (по вертикали, горизонтали, диагонали) замкнутой линии образуется область. Если внутри неё есть точки противника (при этом могут быть пункты, не занятые чьими-либо точками), то это считается областью окружения, в которую далее запрещено ставить точку любому из игроков. Если точек соперника нет, то область свободная и в неё можно ставить точки.
    * При появлении в свободной области точки соперника свободная область будет считаться областью окружения при условии, что точка соперника не была завершающей в его окружении.
    * Точки, попавшие в область окружения, далее не участвуют в образовании линий для окружения.
    * Точки, поставленные на краю поля, не окружаются.
    * Партия заканчивается, когда не осталось свободных мест, по взаимному согласию игроков, либо когда один из игроков завершает игру. Если один игрок останавливает игру, остальные продолжают играть. Если остался один игрок - игра заканчивается и оставшиеся точки, которые можно окружить считаются захваченными им.
    * Победа определяется при подсчёте окружённых точек (побеждает игрок, который окружил большее число точек соперника) или по взаимному согласию игроков (ничья).

Замечания:
    * Пусть есть непрерывная замкнутая линия, которая ограничивает некоторую область. Но в этой области нет точек противника. Потом противник сделал ход в эту область, эта область будет тогда считаться окружающей, но только в момент хода игрока, которому принадлежит область. При этом ход может быть в любое другое место на поле (не обязательно входить в состав той окружающей области).
    * Пусть есть окружающая область, которая (в момент Х) попала в окружение. В этом случае количество точек противника, которое область содержала до момента Х, не учитывается при подсчёт окружённых точек в конце партии.
    * Игроку, который первый планирует сказать «стоп», следует обезопасить свои точки от окружения выходом к краю.
    * На фактическое обведение точки, поставленной в область, ход не тратится — после обведения можно ходить куда угодно.
    * Окружение должно быть построено так, чтобы расстояние между точками составляло не более одной клетки — по прямой или по диагонали.
    * Пленные точки в окружении участвовать не могут. Территория без пленных точек противника не захватывается. Ставить точку в территорию, захваченную противником, запрещается.

Цель:
    * В классических точках: точки (окружить, взять в плен больше точек)

На основе официальных правил (Источник: http://ru.wikipedia.org/wiki/Точки).

II) Ограничения на игровую сессию.
    * Размер поля:
      - Классический (39x32)
      - Настраиваемая: (10x10 - 50x50)
    * Кол-во игроков: 2 - 4.
    * Время на ход: (15 с - 90 c)
    * Дополнительный ход после окружения: вкл/выкл.
    * Цель:
      - Классика (окружить больше точек)

III) Организация пакетов.

Общий вид команды клиент->сервер:
+-------------------------------------------------+
|  КОД[˽параметр1][˽параметр2]...[˽параметрN]\n  |
+-------------------------------------------------+
КОД - 3 символа.

Общий вид команды сервер->клиент:
+-----------------------------------+
|  КОД[˽Дополнительное_описание]\n  |
|  [тело_ответа]\n                  |
|  [тело_ответа]\n                  |
|  \n                               |
|  \n                               |
+-----------------------------------+
КОД - 3 символа.

IV) Команды и представление пакетов.
Сервер хранит соответсвие IP:PORT для каждого пользователя и поэтому знает от кого пришла команда и кому послать ответ.

=== Ответы со сторон сервера ===

* Команда успешно обработанна:

200\n
\n
\n

* Статистика игрока:

201\n
LOG˽логин\n
NPG˽int\n       // Количество сыгранных партий
NPW˽int\n       // Количество выгранных партий
NPL˽int\n       // Количество проигранных партий
NPD˽int\n       // Количество сыгранных в ничью партий
\n
\n

* Список партий:
202\n
GID˽int\n                                // ID партии
GPM˽int\n                                // Максимальное количество игроков
GPC˽int\n                                // Текущее количество игроков
GAS˽intX˽intY\n                          // Размер игрового поля
GTT˽int\n                                // Время на ход в секундах
GET˽0/1\n                                // Дополнительный ход после окружния области вкл/выкл
GUL˽логин1[˽логин2[˽логин3[˽логин4]]]\n  // Игроки находящиеся в партии
\n
...                                      // Следующие игры
\n
\n

Замечание:
  Передаются все партии, как ожидающие игроков так и уже начатые.

* Партия создана:
203\n
GID˽int\n           // ID созданной партии
\n
\n

Замечание:
  Игрок создавший партию автоматически к ней присоединяется.

* Текущее состояние партии:

204\n
ACU˽логин\n                     // Владелец хода
AUF˽0/1˽0/1[˽0/1][˽0/1]\n       // Состояние активности игроков
SCR˽int˽int[˽int][˽int]\n       // Счёт игроков
GAL˽строка0\n                   // Строка 0 игрового поля
GAL˽строка1\n                   // Строка 1 игрового поля
...                             // ...
GAL˽строкаY-1\n                 // Строка Y-1 игрового поля
\n
\n

Замечание:
  Ориентация игровой карты имеет следующий вид:

(0,0)                  X
  +--------------------->
  |
  |
  |
  |
 Y|
  V

  Строка формируется из последовательности цифр. Их значения:
    0 - Пустая клетка
  1-4 - Точка игрока с этим номером
  5-8 - Захваченная точка игрока с этим номером - 4
    9 - Пустая точка окружения

* Пользователь с таким логинов уже существует
400\n
\n
\n

* Неверная команда или параметр
401\n
\n
\n

* Внутренняя ошибка сервера
402\n
\n
\n

* Ошибка авторизации
403\n
\n
\n

* Пользователь не авторизован
404\n
\n
\n

* Партия с запрашиваемым ID не существует
405\n
\n
\n

* В партии с запрашиваемым ID нет мест
406\n
\n
\n

* Невозможно покинуть игру, так как пользователь не находиться в игре
407\n
\n
\n

* Недопустимый (не свой) ход
408\n
\n
\n

=== Запросы со стороны клиента ===

 1. Регистрация нового пользователя:
    REG˽логин˽пароль\n
    \n
    \n

    Ожидаемые ответы:
    -200
    -400
    -401
    -402

    Замечания:
    * в логине не должно быть пробелов.
    
 2. Залогиниться:
    LOG˽логин˽пароль\n
    \n
    \n

    Ожидаемые ответы:
    -200
    -401
    -402
    -403

    Замечания:
    * в логине не должно быть пробелов.

 3. Разлогиниться:
    LGT\n
    \n
    \n

    Ожидаемые ответы:
    -200
    -401
    -402
    -404

 4. Статистика пользователя:
    UST\n
    \n
    \n

    Ожидаемые ответы:
    -201
    -401
    -402
    -404

 4. Статистика пользователя:
    UST\n
    \n
    \n

    Ожидаемые ответы:
    -201
    -401
    -402
    -404

 5. Список партий:
    GLS\n
    \n
    \n

    Ожидаемые ответы:
    -202
    -401
    -402
    -404

 6. Создать новую партию:
    NEW˽<количество игроков int 2-4>˽intX˽intY˽<продолжительность хода int>˽<право дополнительного хода 0/1>\n
    \n
    \n

    Ожидаемые ответы:
    -203
    -401
    -402
    -404

 7. Присоединиться к партии:
    JOI˽<ID игры int>\n
    \n
    \n

    Ожидаемые ответы:
    -200
    -401
    -402
    -404
    -405
    -406

 8. Покинуть партию:
    FIN\n
    \n
    \n

    Ожидаемые ответы:
    -200
    -401
    -402
    -404
    -407

 9. Сделать ход:
    TRN˽intX˽intY\n
    \n
    \n

    Ожидаемые ответы:
    -200
    -401
    -402
    -404
    -407
    -408

10. Закончить растановку точек:
    SRD\n
    \n
    \n

    Ожидаемые ответы:
    -200
    -401
    -402
    -404
    -407

=== Серверный запрос на изменение хода ===

  * Изменилось состояние игры:
    GSC\n
    \n
    \n